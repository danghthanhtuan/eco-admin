<ng-container *ngIf="isLoading">
  <div class="progress progress-modal">
    <div class="progress-bar progress-bar-striped progress-bar-animated bg-primary" role="progressbar"
      style="width: 100%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
  </div>
</ng-container>

<div class="modal-header">

  Cập nhật trạng thái giao dịch
</div>
<div class="modal-body">
  <!-- <ng-container *ngIf="isLoading">
    <span>Thêm thuộc tính....</span>
  </ng-container> -->

  <ng-container *ngIf="isLoading">
    <form action="#" class="form form-label-right" [formGroup]="formGroup">
      <div class="form-group row">
    

      </div>
      <div class="form-group row">
        <div class="col-lg-4">
          <label class="form-label">TransactionID</label>
          <input  [attr.disabled]="true" type="text" class="form-control form-control-lg form-control-solid" name="transactionID"
            placeholder="transactionID" autocomplete="off"  formControlName="transactionID" />

        </div>
        <div class="col-lg-4">
          <label class="form-label">OrderCode</label>
          <input  [attr.disabled]="true"  type="text" class="form-control form-control-lg form-control-solid" name="orderCode" placeholder="orderCode"
            autocomplete="off" 
            formControlName="orderCode" />
        </div>
        <!-- [attr.disabled]="typeSearchKey ? '' : null" -->
        <div class="col-lg-4">
          <label class="form-label">Phương thức</label>
          <input [attr.disabled]="true" type="text" class="form-control form-control-lg form-control-solid" name="paymentType" placeholder="paymentType"
           [value]="getTransTypeName(transaction.paymentType)"/>
        </div>
      </div>
      <div class="form-group row">
        <div class="col-lg-4">
          <label class="form-label">Shipping Name</label>
          <input type="text"  [attr.disabled]="true" class="form-control form-control-lg form-control-solid" name="sortOrder" placeholder="shippingName"
          formControlName="shippingName" />
        </div>
        <div class="col-lg-4">
          <label class="form-label">Shipping Phone</label>
          <input  [attr.disabled]="true" type="text" class="form-control form-control-lg form-control-solid" name="shippingPhone" placeholder="shippingPhone"
            formControlName="shippingPhone" />
        </div>
        <div class="col-lg-4">
          <label class="form-label">Shipping Address</label>
          <input  [attr.disabled]="true" type="text" class="form-control form-control-lg form-control-solid" name="shippingAddress" placeholder="shippingAddress"
            formControlName="shippingAddress" />

        </div>        
      </div>
      <div class="form-group row">
        <div class="col-lg-4">
          <label class="form-label">Created Date</label>
          <input type="text"  [attr.disabled]="true" class="form-control form-control-lg form-control-solid" name="createdDate" placeholder="createdDate"
          formControlName="createdDate" />
        </div>
        <div class="col-lg-4">
          <label class="form-label">Total Amount</label>
          <input  [attr.disabled]="true" type="text" class="form-control form-control-lg form-control-solid" name="totalAmount" placeholder="totalAmount"
          [value]="transaction.totalAmount | currency : 'VND'" />
        </div>
        <div class="col-lg-4">
          <label class="form-label">Trạng thái</label>

          <select class="form-control" name="status" placeholder="Filter by Status" formControlName="status">
            <!-- <option value="">All</option> -->
            <ng-container>
              <option value="1" selected>Mới</option>
              <option value="2" selected>Đang xử lý</option>
              <option value="3" selected>Đang giao</option>
              <option value="4" selected>Hoàn thành</option>
              <option value="5" selected>Huỷ</option>
            </ng-container>
          </select>
        </div>
        
      </div>
      <label class="form-label">Chi tiết đơn</label>
      <div class="table-responsive angular-bootstrap-table">
        <table class="table table-head-custom table-vertical-center overflow-hidden">
          <thead>
            <th>
              Hình ảnh
            </th>

            <th>
              Tên sản phẩm     
            </th>       
            <th>
              Giá lúc mua
            </th>
            <th>
              Giá khuyến mãi
            </th>
            <th>
             Số lượng
            </th>
            <th>
              Actions
             </th>
          </thead>
          <tbody>
            <tr *ngFor="let item of transaction.orderItems; let i = index;">

              <td> <img style="max-width: 150px; max-height: 150px;" alt="" [src]="urlImage + item.imageUrl" class="h-75 align-self-end"></td>
              <td>{{ item.productName }}</td>
              <td>{{ item.buyPrice  | currency : 'VND'}}</td>
              <td>{{ item.promotionPrice | currency : 'VND' }}</td>
              <td>{{ item.quantity }}</td>

              <td>
                <a
                  title="Edit Order Item"
                  class="btn btn-icon btn-light btn-hover-primary btn-sm mx-3"               
                  (click)="editProductItem(transaction.id, item)"
                >
                <!-- (click)="addSlides(slide.id)" -->
                  <span
                    [inlineSVG]="
                      './assets/media/svg/icons/Communication/Write.svg'
                    "
                    cacheSVG="true"
                    class="svg-icon svg-icon-md svg-icon-primary"
                  >
                  </span>
                </a>
                <a
                  title="Delete Order Item"
                  class="btn btn-icon btn-light btn-hover-danger btn-sm"
                  (click)="deleteOrderItem(i)"
                >
                  <span
                    [inlineSVG]="'./assets/media/svg/icons/General/Trash.svg'"
                    cacheSVG="true"
                    class="svg-icon svg-icon-md svg-icon-danger"
                  >
                  </span>
                </a>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <!-- <button type="button" class="btn btn-primary btn-elevate" >
        Thêm sản phẩm
      </button> -->
    </form>
  </ng-container>
</div>
<div class="modal-footer">
  <div>
    <button type="button" class="btn btn-light btn-elevate mr-1" (click)="modal.dismiss()">
      Cancel
    </button>&nbsp;
    <button type="button" class="btn btn-primary btn-elevate"  [attr.disabled]="(transaction.status === 4 || transaction.status === 5) ? '' : null" (click)="edit()" >
      Cập nhật
    </button>
  </div>
</div>