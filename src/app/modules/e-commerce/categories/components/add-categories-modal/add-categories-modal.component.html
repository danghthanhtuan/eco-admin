<ng-container *ngIf="isLoading">
  <div class="progress progress-modal">
    <div class="progress-bar progress-bar-striped progress-bar-animated bg-primary" role="progressbar"
      style="width: 100%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
  </div>
</ng-container>

<div class="modal-header">
  <!-- <div class="modal-title h4"> Add</div> -->
  <ng-container *ngIf="category.id">Edit</ng-container>
  <ng-container *ngIf="!category.id">Create</ng-container>
  Categories
</div>
<div class="modal-body">
  <!-- <ng-container *ngIf="isLoading">
    <span>Thêm thuộc tính....</span>
  </ng-container> -->

  <ng-container *ngIf="isLoading">
    <form action="#" class="form form-label-right" [formGroup]="formGroup">
      <div class="form-group row">
        <div class="col-lg-6">
          <label>Chọn Categories Parent (nếu tạo danh mục con)</label>
          <select class="form-control" name="categoryParent" placeholder="Filter by Status" formControlName="categoryParent">
            <!-- <option value="">All</option> -->
            <ng-container *ngFor="let cate of listCategoryParent">
              <option value="{{cate.id}}" selected>{{cate.categoryName}}</option>
            </ng-container>
          </select>
          <!-- <div class="invalid-feedback" *ngIf="controlHasError('required', 'attributeId')">
            Attribute là bắt buộc!
          </div> -->
        </div>

      </div>
      <div class="form-group row">
        <div class="col-lg-6">
          <label class="form-label">Tên danh mục</label>
          <input type="text" class="form-control form-control-lg form-control-solid" name="categoryName"
            placeholder="categoryName" autocomplete="off"
            [class.is-invalid]="isControlInvalid('categoryName')"
            [class.is-valid]="isControlValid('categoryName')" formControlName="categoryName" />
          <div class="valid-feedback" *ngIf="isControlValid('categoryName')">
            Tên thuộc tính hợp lệ
          </div>
          <div class="invalid-feedback" *ngIf="controlHasError('required', 'categoryName')">
            Tên thuộc tính bắt buộc
          </div>
          <div class="invalid-feedback" *ngIf="controlHasError('minlength', 'categoryName')">
            Phải hiều hơn 1 ký tự
          </div>
          <div class="invalid-feedback" *ngIf="controlHasError('maxlength', 'categoryName')">
            Tối đa 100 ký tự
          </div>
        </div>
        <div class="col-lg-6">
          <label class="form-label">Nhập Seo Title </label>
          <input type="text" class="form-control form-control-lg form-control-solid" name="seoTitle" placeholder="seoTitle"
            autocomplete="off" [class.is-invalid]="isControlInvalid('seoTitle')" [class.is-valid]="isControlValid('seoTitle')"
            formControlName="seoTitle" />
            <div class="valid-feedback" *ngIf="isControlValid('seoTitle')">
              Seo Title hợp lệ
            </div>
            <div class="invalid-feedback" *ngIf="controlHasError('required', 'seoTitle')">
              Seo Title bắt buộc
            </div>
            <div class="invalid-feedback" *ngIf="controlHasError('minlength', 'seoTitle')">
              Phải hiều hơn 1 ký tự
            </div>
            <div class="invalid-feedback" *ngIf="controlHasError('maxlength', 'seoTitle')">
              Tối đa 50 ký tự
            </div>
        </div>
      </div>

      <div class="form-group row">
        <div class="col-lg-6">
          <label class="form-label">Seo Description</label>
          <input type="text" class="form-control form-control-lg form-control-solid" name="seoDescription"
            placeholder="seoDescription" autocomplete="off"
            [class.is-invalid]="isControlInvalid('seoDescription')"
            [class.is-valid]="isControlValid('seoDescription')" formControlName="seoDescription" />
          <div class="valid-feedback" *ngIf="isControlValid('seoDescription')">
            Seo Description hợp lệ
          </div>
          <div class="invalid-feedback" *ngIf="controlHasError('required', 'seoDescription')">
            Seo Description bắt buộc
          </div>
          <div class="invalid-feedback" *ngIf="controlHasError('minlength', 'seoDescription')">
            Phải hiều hơn 1 ký tự
          </div>
          <div class="invalid-feedback" *ngIf="controlHasError('maxlength', 'seoDescription')">
            Tối đa 200 ký tự
          </div>
        </div>
        <div class="col-lg-6">
          <label class="form-label">Seo Keyword </label>
          <input type="text" class="form-control form-control-lg form-control-solid" name="seoTitle" placeholder="seoKeyword"
            autocomplete="off" [class.is-invalid]="isControlInvalid('seoKeyword')" [class.is-valid]="isControlValid('seoKeyword')"
            formControlName="seoKeyword" />
            <div class="valid-feedback" *ngIf="isControlValid('seoKeyword')">
              Seo Keyword hợp lệ
            </div>
            <div class="invalid-feedback" *ngIf="controlHasError('required', 'seoKeyword')">
              Seo Keyword bắt buộc
            </div>
            <div class="invalid-feedback" *ngIf="controlHasError('minlength', 'seoKeyword')">
              Phải hiều hơn 1 ký tự
            </div>
            <div class="invalid-feedback" *ngIf="controlHasError('maxlength', 'seoKeyword')">
              Tối đa 150 ký tự
            </div>
        </div>
      </div>
      <div class="form-group row">
        <div class="col-lg-6">
          <label class="form-label">Category Tags (cách dấu phẩy ',')</label>
          <input type="text" class="form-control form-control-lg form-control-solid" name="categoryTags"
            placeholder="categoryTags" autocomplete="off"
            [class.is-invalid]="isControlInvalid('categoryTags')"
            [class.is-valid]="isControlValid('categoryTags')" formControlName="categoryTags" />
          <div class="valid-feedback" *ngIf="isControlValid('categoryTags')">
            Category Tags hợp lệ
          </div>
          
        </div>
        <div class="col-lg-6">
          <label class="form-label">Content (hiện thị ở Xây dựng cấu hình)</label>
          <input type="text" class="form-control form-control-lg form-control-solid" name="content" placeholder="content"
            autocomplete="off" [class.is-invalid]="isControlInvalid('content')" [class.is-valid]="isControlValid('content')"
            formControlName="content" />
            <div class="valid-feedback" *ngIf="isControlValid('content')">
              Content hợp lệ
            </div>
          
        </div>
      </div>
      <div class="form-group row">
        <div class="col-lg-4">
          <label class="form-label">Sort Order</label>
          <input type="number" class="form-control form-control-lg form-control-solid" name="sortOrder"
            placeholder="sortOrder" autocomplete="off"
            [class.is-invalid]="isControlInvalid('sortOrder')"
            [class.is-valid]="isControlValid('sortOrder')" formControlName="sortOrder" />
          <div class="valid-feedback" *ngIf="isControlValid('sortOrder')">
            Sort Order hợp lệ
          </div>
          
        </div>
        <div class="col-lg-8">
          <label class="form-label">Hình ảnh (top 6, và danh mục Xây dựng cấu hình cần)</label>
          <input 
            formControlName="file"
            id="file" 
            type="file" 
            class="form-control"
            (change)="onFileChange($event)">
        </div>
      </div>

      <div class="form-group row">
        <div class="col-lg-4">
        </div>
        <div class="col-lg-8">          
          <img id="blah" [src]="fileReview" style="max-width: 250px; max-height: 250px;" alt="your image" />     
        </div>
      </div>
    </form>
  </ng-container>

</div>

<div class="modal-footer">
  <div>
    <button type="button" class="btn btn-light btn-elevate mr-1" (click)="modal.dismiss()">
      Cancel
    </button>&nbsp;
    <button type="button" class="btn btn-primary btn-elevate" (click)="save()">
      OK
    </button>
  </div>
</div>